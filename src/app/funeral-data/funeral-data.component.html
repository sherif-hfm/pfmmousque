<div class="funeral-data">
  <header class="page-header">
    <h1 class="page-title">بيانات الجنائز</h1>
  </header>

  <section class="search-section" *ngIf="mode === 'view'">
    <div class="search-form">
      <label class="search-label">تاريخ الجنازة</label>
      <input type="text" class="search-input" [(ngModel)]="searchDate" />
      <button type="button" class="btn btn-primary" (click)="search()">بحث</button>
    </div>
  </section>

  <div class="details">
    <ng-container *ngIf="mode === 'view'">
      <div class="toolbar">
        <button type="button" class="btn btn-primary" (click)="add()">اضافة</button>
      </div>
      <div class="data-grid" role="table" aria-label="قائمة الجنائز">
        <div class="grid-cell grid-header" role="columnheader">تاريخ الجنازة</div>
        <div class="grid-cell grid-header" role="columnheader">اسم المتوفى</div>
        <div class="grid-cell grid-header" role="columnheader">جنس المتوفى</div>
        <div class="grid-cell grid-header" role="columnheader">الصلاة</div>
        <div class="grid-cell grid-header" role="columnheader">مكان الدفن</div>
        <div class="grid-cell grid-header" role="columnheader">رقم الإسعاف</div>
        <div class="grid-cell grid-header" role="columnheader">رقم القبر</div>
        <div class="grid-cell grid-header" role="columnheader">ملاحظات</div>
        <div class="grid-cell grid-header" role="columnheader">الاجراءات</div>
        <ng-container *ngFor="let funeral of funeralList; let i = index">
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">تاريخ الجنازة:</span>
            {{ funeral.date }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">اسم المتوفى:</span>
            {{ funeral.deadName }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">جنس المتوفى:</span>
            {{ funeral.sex.Name }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">الصلاة:</span>
            {{ funeral.prayer.prayerName }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">مكان الدفن:</span>
            {{ funeral.purialplace.placeName }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">رقم الإسعاف:</span>
            {{ funeral.ambulanceNo || '—' }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">رقم القبر:</span>
            {{ funeral.graveNo || '—' }}
          </div>
          <div class="grid-cell" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <span class="grid-mobile-label">ملاحظات:</span>
            {{ funeral.notes || '—' }}
          </div>
          <div class="grid-cell grid-cell-actions" [ngClass]="{'grid-cell-odd': (i % 2) > 0}" role="cell">
            <button type="button" class="btn btn-success" (click)="edit(funeral.id)">تعديل</button>
            <button type="button" class="btn btn-danger" (click)="delete(funeral.id)">حذف</button>
          </div>
        </ng-container>
      </div>
    </ng-container>

    <section *ngIf="mode !== 'view'" class="edit-section">
      <h2 class="edit-section-title">اضافة / تعديل بيانات الجنازة</h2>
      <form [formGroup]="funeralFrom" class="edit-form">
        <div class="form-row">
          <label class="form-label">تاريخ الصلاة</label>
          <input type="text" class="form-input" formControlName="date" />
        </div>
        <div class="form-row">
          <label class="form-label">اسم المتوفى</label>
          <input type="text" class="form-input" formControlName="deadName" />
        </div>
        <div class="form-row">
          <label class="form-label">جنس المتوفى</label>
          <select class="form-input form-select" formControlName="sex">
            <option *ngFor="let sex of sexs" [value]="sex.id">{{ sex.Name }}</option>
          </select>
        </div>
        <div class="form-row">
          <label class="form-label">الصلاة</label>
          <select class="form-input form-select" formControlName="prayerId">
            <option *ngFor="let prayer of prayers" [value]="prayer.id">{{ prayer.prayerName }}</option>
          </select>
        </div>
        <div class="form-row">
          <label class="form-label">مكان الدفن</label>
          <select class="form-input form-select" formControlName="placeId">
            <option *ngFor="let place of Places" [value]="place.id">{{ place.placeName }}</option>
          </select>
        </div>
        <div class="form-row">
          <label class="form-label">رقم الإسعاف</label>
          <input type="text" class="form-input" formControlName="ambulanceNo" placeholder="اختياري" />
        </div>
        <div class="form-row">
          <label class="form-label">رقم القبر</label>
          <input type="text" class="form-input" formControlName="graveNo" placeholder="اختياري" />
        </div>
        <div class="form-row">
          <label class="form-label">ملاحظات</label>
          <textarea class="form-input form-textarea" formControlName="notes" placeholder="اختياري" rows="3"></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-success" [disabled]="funeralFrom.status === 'INVALID'" (click)="save()">حفظ</button>
          <button type="button" class="btn btn-danger" (click)="exit()">خروج</button>
        </div>
      </form>
    </section>
  </div>
</div>
